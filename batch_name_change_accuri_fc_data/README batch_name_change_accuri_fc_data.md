batch_name_change_accuri_fc_data.py
is a Python3 script for automized batch renaming of .fcs files generated by the BD Accuri C6 software.
The script has been co-designed with the Matlab script FI_size_normalization_loader.m, and the Python script 
can therefore output the renamed files in the directory hierachy required by the Matlab script.

###################################################################################
Copyright (C) 2015-2016 Daniel Brink, Applied Microbiology, Lund University, Sweden

This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
###################################################################################


# Background
(Cited from S1 Supplementary Information in Brink et al. 2016)

The batch_name_change_accuri_fc_data.py script was specifically designed for use with .fcs-files output by the Accuri software. A specific feature of this software is that it adds the acquisition position of the sample to each sample with exported as .fcs: e.g. A01 TMB3711 1g.L 0h. The Python script uses the position in the acquisition matrix (rows A-H, columns 01-12) to rename and sort the files in the required hierarchy. The user inputs the desired names in the accuri_data_matrix.txt template and when run the script outputs data that can directly be used as in-data for FI_size_normalization_loader.m script in Matlab. Although it is however possible to rename the .fcs files manually (as long as the file names end with Xh.fcs, where X is the sample time), we recommend users to use the batch_name_change_accuri_fc_data.py-FI_size_normalization_loader.m pipeline for convenience.



# Requirements: 

1. Python3

2. A text file containing the desired new names for each sample in the .fcs file generated by the BD Accuri C6
   An template file is provided with the script:template_renaming_matrix.txt             



# Running the script:

At the moment, this script has only been used in a Linux environment. 
Users might need to make small changes to the code if a OSX or Windows environment is preferred.

The script is called from the terminal by the following command:

python3 batch_name_change_accuri_fc_data.py <template_renaming_matrix.txt>

Where <template_renaming_matrix.txt> can be renamed to the users liking.


The script is controlled by the template_renaming_matrix.txt file.
The user will have to state the location of the files that are going to be renamed and the desired output directory,
the names and number of sub-directories (if desired) and
the old filename (with its Accuri coordinate name) and the desired new name for all the files that are going to be renamed


 
# Example
Save a copy of template_renaming_matrix.txt as my_samples_matrix.txt
Rows that begin with one or more # are considered as comments and will not be read by the script. Neither will empty lines.

State the directory of your .fcs files
PATH=/home/my_fcs_data/2016-01-28 samples/0h

State the desired directory for the renamed .fcs files
NEWPATH=/home/my_fcs_data/2016-01-28 samples/renamed

State the desired directory structure, with main directory-subdirectory-sub-subdirectory (only main directory is required)
MAIN_DIR=strain1
MAIN_DIR=strain2

SUBDIR=bio-rep1
SUBDIR=bio-rep2

SUB_SUBDIR=glucose1g-l
SUB_SUBDIR=glucose20g-l

State the new name of each .fcs file from the matrix used by the BD Accuri

## Names of rows ## 
ROW_A01:strain1 glucose1g-l
#ROW_A02:water
ROW_A03:strain1 glucose20g-l
#ROW_A04:water
ROW_B01:strain2 glucose1g-l
#ROW_B02:water
ROW_B03:strain2 glucose20g-l
#ROW_B04:water

## Names of columns ##	(Only the rows are required for the script, but these column parameters can be used for convenience)
COL_01:bio-rep1
#COL_02:water
COL_03:bio-rep2
#COL_04:water

Save the my_samples_matrix.txt file.
Navigate to the folder that contains the script and the renaming-text file and type the following command in the terminal:

>python3 batch_name_change_accuri_fc_data.py my_samples_matrix.txt
